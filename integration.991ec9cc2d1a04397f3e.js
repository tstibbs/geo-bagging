(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{qnp4:function(t,n,i){"use strict";i.r(n);i("tbak");var o=i("EVdn"),a=i.n(o),e=i("kHqW"),r=i("ICp+");({showMap:function(){/^https?:\/\/trigpointing\.uk\/trig\/\d+/.test(window.location.href)?this.embedSingleMap():/^https?:\/\/trigpointing\.uk\/trigs\/view-trigs\.php.*/.test(window.location.href)?this.showMapForSearch():/^https?:\/\/trigpointing\.uk\/trigtools\/find.php.*/.test(window.location.href)?alert("Map display not supported on this page, please use the 'detailed search' page instead: http://trigpointing.uk/trigs/"):alert("Map display not supported on this page.")},showMapForSearch:function(){this.getPointsFromSearch(window.location.search,(function(t){var n={pointsToLoad:{generalPoints:t},force_config_override:!0,use_sidebar:!1};a()("body").empty(),r.a.loadMap(n).done((function(n){t.forEach((function(t){var n=t.eastings,e=t.northings;(null==i||n<i)&&(i=n),(null==o||n>o)&&(o=n),(null==a||e<a)&&(a=e),(null==r||e>r)&&(r=e)}));var i,o,a,r,s=e.a.osgbToLngLat(i,a),p=e.a.osgbToLngLat(o,r);n.getMap().fitBounds([[s[1],s[0]],[p[1],p[0]]])}))}))},embedSingleMap:function(){var t=a()("div:contains('Grid reference : '):not(:has(*)) + div a").text(),n=e.a.gridRefToLngLat(t),i=n[0],o=n[1],s=a()("a:contains('trigpoints')").attr("href");a.a.ajax(s).done(function(t,n,e){var s="?"+a()(a.a.parseHTML(t)).find("a:contains('Interactive Map')").attr("href").split("?")[1];this.getPointsFromSearch(s,(function(t){var n=a()('map[name="trigmap"]').parent();n.empty();var e=window.location.pathname.split(/\//).pop();e=/0*([^0].*)/.exec(e)[1];var s=null;t=t.filter((function(t){return t.id!=e||(s=t,!1)}));var p={map_style:"mini_embedded",cluster:!1,hider_control_start_visible:!1,show_hider_control:!0,start_position:[o,i],map_outer_container_element:n,pointsToLoad:{significantPoint:s,generalPoints:t},force_config_override:!0,initial_zoom:13,use_sidebar:!1};r.a.loadMap(p)}))}.bind(this))},getPointsFromSearch:function(t,n){a.a.get("/trigs/down-flash.php"+t,(function(t,i,o){var e=/Showing trigpoints \d+ to \d+ of (\d+)/g,r=a()("body").text();if(!0===(!(e.test(r)&&parseInt(e.exec(r)[1])>1e3)||confirm("Map will only display the first 1000 points, are you sure you want to continue?"))){var s=decodeURIComponent(t),p=a()(a.a.parseXML(s)).find("C").map((function(t,n){var i=a()(n),o=i.attr("I"),e="http://trigpointing.uk/trig/"+o;return{eastings:parseInt(i.attr("E")),northings:parseInt(i.attr("N")),url:e,id:o,name:i.attr("D")}})).toArray();n(p)}}))}}).showMap()}},[["qnp4",1,0,2]]]);
//# sourceMappingURL=integration.991ec9cc2d1a04397f3e.js.map