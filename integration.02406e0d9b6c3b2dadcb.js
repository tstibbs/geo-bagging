(self.webpackChunk_tstibbs_geo_bagging_ui=self.webpackChunk_tstibbs_geo_bagging_ui||[]).push([[556],{5170:(t,i,n)=>{"use strict";var o=n(9755),e=n(942),a=n(1270);({showMap:function(){/^https?:\/\/trigpointing\.uk\/trig\/\d+/.test(window.location.href)?this.embedSingleMap():/^https?:\/\/trigpointing\.uk\/trigs\/view-trigs\.php.*/.test(window.location.href)?this.showMapForSearch():/^https?:\/\/trigpointing\.uk\/trigtools\/find.php.*/.test(window.location.href)?alert("Map display not supported on this page, please use the 'detailed search' page instead: http://trigpointing.uk/trigs/"):alert("Map display not supported on this page.")},showMapForSearch:function(){this.getPointsFromSearch(window.location.search,(function(t){var i={pointsToLoad:{generalPoints:t},force_config_override:!0,use_sidebar:!1};o("body").empty(),a.Z.loadMap(i).done((function(i){t.forEach((function(t){var i=t.eastings,e=t.northings;(null==n||i<n)&&(n=i),(null==o||i>o)&&(o=i),(null==a||e<a)&&(a=e),(null==r||e>r)&&(r=e)}));var n,o,a,r,s=e.Z.osgbToLngLat(n,a),p=e.Z.osgbToLngLat(o,r);i.getMap().fitBounds([[s[1],s[0]],[p[1],p[0]]])}))}))},embedSingleMap:function(){var t=o("div:contains('Grid reference : '):not(:has(*)) + div a").text(),i=e.Z.gridRefToLngLat(t),n=i[0],r=i[1],s=o("a:contains('trigpoints')").attr("href");o.ajax(s).done(function(t,i,e){var s="?"+o(o.parseHTML(t)).find("a:contains('Interactive Map')").attr("href").split("?")[1];this.getPointsFromSearch(s,(function(t){var i=o('map[name="trigmap"]').parent();i.empty();var e=window.location.pathname.split(/\//).pop();e=/0*([^0].*)/.exec(e)[1];var s=null;t=t.filter((function(t){return t.id!=e||(s=t,!1)}));var p={map_style:"mini_embedded",cluster:!1,hider_control_start_visible:!1,show_hider_control:!0,start_position:[r,n],map_outer_container_element:i,pointsToLoad:{significantPoint:s,generalPoints:t},force_config_override:!0,initial_zoom:13,use_sidebar:!1};a.Z.loadMap(p)}))}.bind(this))},getPointsFromSearch:function(t,i){o.get("/trigs/down-flash.php"+t,(function(t,n,e){var a=/Showing trigpoints \d+ to \d+ of (\d+)/g,r=o("body").text();if(!0===(!(a.test(r)&&parseInt(a.exec(r)[1])>1e3)||confirm("Map will only display the first 1000 points, are you sure you want to continue?"))){var s=decodeURIComponent(t),p=o(o.parseXML(s)).find("C").map((function(t,i){var n=o(i),e=n.attr("I"),a="http://trigpointing.uk/trig/"+e;return{eastings:parseInt(n.attr("E")),northings:parseInt(n.attr("N")),url:a,id:e,name:n.attr("D")}})).toArray();i(p)}}))}}).showMap()}},0,[[5170,666,216,270]]]);
//# sourceMappingURL=integration.02406e0d9b6c3b2dadcb.js.map