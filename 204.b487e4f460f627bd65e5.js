(self.webpackChunk_tstibbs_geo_bagging_ui=self.webpackChunk_tstibbs_geo_bagging_ui||[]).push([[204],{6952:()=>{},6582:(e,r,t)=>{"use strict";t.d(r,{Z:()=>c});var n=t(5243),a=t(9755),i=t(8382),o=t(5857),s=t(4260),l=i.Z.location.pathname.split("/").pop(),u={baseUrl:null!=window.geoBaggingBaseUrl?window.geoBaggingBaseUrl:"",map_style:"full",cluster:!0,dimensional_layering:!1,initial_zoom:13,start_position:[53.374694,-1.711474],force_config_override:!1,map_element_id:"map",map_outer_container_element:a("body"),page_id:l,show_zoom_control:!0,show_selection_control:!0,show_search_control:!0,show_locate_control:!0,show_layers_control:!0,show_position_control:!0,show_hider_control:"mobile",use_sidebar:!0,hider_control_start_visible:!0,icons:{},dimensionNames:[],dimensionValueLabels:{},defaultLayer:"OS",markerConstraints:null};const c=n.Class.extend({initialize:function(e,r){var t=a.extend({},u,e);if(this._checkForUndefaultedProperties(e,"window config"),t.bundles=r,this._storageId="os_map:"+t.page_id+"config",null==e||!0!==e.force_config_override){var n=this._getSavedConfig();t=a.extend({},t,n)}for(var i in o.Z.test("startPosition")&&(t.start_position=o.Z.test("startPosition").split(",")),o.Z.test("startZoom")&&(t.initial_zoom=o.Z.test("startZoom")),this._buildMarkerConstraints(t),t)t.hasOwnProperty(i)&&(this[i]=t[i])},_buildMarkerConstraints:function(e){var r=null;if(null!=o.Z.test("constraints")?r=o.Z.test("constraints"):null!=e.markerConstraints&&"string"==typeof e.markerConstraints&&(r=e.markerConstraints),null!=r){var t=r.split(","),a=null,i=null,l=null,u=null;if(2==t.length){var c=s.Z.gridRefToLngLat(t[0]);i=c[0],a=c[1];var h=s.Z.gridRefToLngLat(t[1]);u=h[0],l=h[1]}else a=parseFloat(t[0]),i=parseFloat(t[1]),l=parseFloat(t[2]),u=parseFloat(t[3]);e.markerConstraints=[[l,i],[a,u]]}null!=e.markerConstraints&&Array.isArray(e.markerConstraints)&&(e.markerConstraints=n.latLngBounds(e.markerConstraints)),null!=e.markerConstraints&&"function"==typeof e.markerConstraints&&(e.markerConstraintsMatcher=e.markerConstraints),null!=e.markerConstraints&&null==e.markerConstraintsMatcher&&(e.markerConstraintsMatcher=function(r){return e.markerConstraints.contains(r.latLng)})},_checkForUndefaultedProperties:function(e,r){for(var t in e)e.hasOwnProperty(t)&&!u.hasOwnProperty(t)&&console.warn('Property "'+t+'" (set from '+r+") should have a default")},_getSavedConfig:function(){if(void 0!==localStorage){var e=localStorage.getItem(this._storageId);return null!=e?JSON.parse(e):null}return null},persist:function(e){if(void 0!==localStorage){var r=this._getSavedConfig();null!=r&&(e=a.extend({},r,e)),localStorage.setItem(this._storageId,JSON.stringify(e))}}})},4260:(e,r,t)=>{"use strict";t.d(r,{Z:()=>i});var n=(0,t(4472).Z)("+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs");function a(e,r){for(var t=e.toString();t.length<r;)t="0"+t;return t}const i={latLngToGridRef:function(e,r){var t=10,i=n.forward([r,e]),o=i[0],s=i[1];if(t=void 0===t?10:Number(t),isNaN(t))throw new Error("Invalid precision");var l=Number(Number(o)),u=Number(Number(s));if(isNaN(l)||isNaN(u))throw new Error("Invalid grid reference: "+[e,r]);if(0===t)return a(l,6)+","+a(u,6);var c=Math.floor(l/1e5),h=Math.floor(u/1e5);if(c<0||c>6||h<0||h>12)return"";var d=19-h-(19-h)%5+Math.floor((c+10)/5),f=5*(19-h)%25+c%5;d>7&&d++,f>7&&f++;var g=String.fromCharCode(d+"A".charCodeAt(0),f+"A".charCodeAt(0));return l=Math.floor(l%1e5/Math.pow(10,5-t/2)),u=Math.floor(u%1e5/Math.pow(10,5-t/2)),g+" "+a(l,t/2)+" "+a(u,t/2)},osgbToLngLat:function(e,r){return n.inverse([e,r])},gridRefToOsgb:function(e){e=String(e).trim(),this._determineGridRefType(e);var r=e.match(/^(\d+),\s*(\d+)$/);if(r)return new OsGridRef(r[1],r[2]);if(!(r=e.match(/^[A-Z]{2}\s*[0-9]+\s*[0-9]+$/i)))throw new Error("Invalid grid reference: "+e);var t=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),n=e.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);t>7&&t--,n>7&&n--;var a=(t-2)%5*5+n%5,i=19-5*Math.floor(t/5)-Math.floor(n/5),o=e.slice(2).trim().split(/\s+/);if(1==o.length&&(o=[o[0].slice(0,o[0].length/2),o[0].slice(o[0].length/2)]),a>=15&&(a-=25),i>20&&(i-=25),a<-10||i<-5)throw new Error("Invalid grid reference: gridref="+e+", e100km="+a+", n100km="+i);if(2!=o.length)throw new Error("Invalid grid reference: "+e);if(o[0].length!=o[1].length)throw new Error("Invalid grid reference: "+e);return o[0]=(o[0]+"00000").slice(0,5),o[1]=(o[1]+"00000").slice(0,5),[parseInt(a+"00000")+parseInt(o[0]),parseInt(i+"00000")+parseInt(o[1])]},gridRefToLngLat:function(e){var r=this.gridRefToOsgb(e);return n.inverse(r)},_determineGridRefType:function(e){if(/^\w\s*\d{3,}\s*\d{3,}$/.test(e))throw new Error("Irish grid references currently unsupported: "+e)}}},8382:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});const n=window},5857:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var n=t(8382),a=t(7830).Z.Class.extend({initialize:function(){this.update()},update:function(){this._params={};var e=n.Z.location.search;e.length>0&&(e=e.substr(1)).split("&").forEach(function(e){var r=e.split("=");this._params[r[0]]=decodeURIComponent(r[1])}.bind(this))},getParams:function(){return this._params},test:function(e){return this._params[e]}}),i=new a;const o={test:function(e){return i.test(e)},tester:a}},7830:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var n=t(5243),a=t(6094),i=t(403),o=t(5965);delete n.Icon.Default.prototype._getIconUrl,n.Icon.Default.mergeOptions({iconRetinaUrl:i,iconUrl:a,shadowUrl:o});const s=n},58:(e,r,t)=>{"use strict";t.r(r);var n=t(2757),a=t(6582);describe("config",(function(){before((function(){void 0!==localStorage&&localStorage.clear()})),it("should inherit defaults",(function(){var e=new a.Z;n.hu.equal(!0,e.cluster),n.hu.equal(!1,e.dimensional_layering),n.hu.equal(void 0,e.blah),n.hu.notOk(e.hasOwnProperty("blah"))})),it("defaults can be overridden",(function(){var e=new a.Z({cluster:!1,blah:"stuff"});n.hu.equal(!1,e.cluster),n.hu.equal(!1,e.dimensional_layering),n.hu.equal("stuff",e.blah),n.hu.ok(e.hasOwnProperty("blah"))})),describe("persistence",(function(){it("can save and retrieve",(function(){var e=new a.Z({blah:4});n.hu.equal(4,e.blah),e.persist({blah:5}),n.hu.equal(4,e.blah);var r=new a.Z({blah:4});n.hu.equal(5,r.blah)})),it("can save and retrieve with null options",(function(){(new a.Z).persist({blah:5});var e=new a.Z;n.hu.equal(5,e.blah)})),it("can force override",(function(){(new a.Z).persist({blah:5});var e=new a.Z({force_config_override:!0,blah:4});n.hu.equal(4,e.blah)})),it("saving is for a given page id",(function(){new a.Z({page_id:"abc"}).persist({blah:5}),new a.Z({page_id:"xyz"}).persist({blah:6});var e=new a.Z({page_id:"abc"}),r=new a.Z({page_id:"xyz"});n.hu.equal(5,e.blah),n.hu.equal(6,r.blah)}))}))}))}}]);
//# sourceMappingURL=204.b487e4f460f627bd65e5.js.map