(self.webpackChunk_tstibbs_geo_bagging_ui=self.webpackChunk_tstibbs_geo_bagging_ui||[]).push([[395],{942:(r,e,o)=>{"use strict";o.d(e,{Z:()=>t});var i=(0,o(4472).Z)("+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs");function n(r,e){for(var o=r.toString();o.length<e;)o="0"+o;return o}const t={latLngToGridRef:function(r,e){var o=10,t=i.forward([e,r]),a=t[0],s=t[1];if(o=void 0===o?10:Number(o),isNaN(o))throw new Error("Invalid precision");var f=Number(Number(a)),d=Number(Number(s));if(isNaN(f)||isNaN(d))throw new Error("Invalid grid reference: "+[r,e]);if(0===o)return n(f,6)+","+n(d,6);var u=Math.floor(f/1e5),h=Math.floor(d/1e5);if(u<0||u>6||h<0||h>12)return"";var g=19-h-(19-h)%5+Math.floor((u+10)/5),l=5*(19-h)%25+u%5;g>7&&g++,l>7&&l++;var c=String.fromCharCode(g+"A".charCodeAt(0),l+"A".charCodeAt(0));return f=Math.floor(f%1e5/Math.pow(10,5-o/2)),d=Math.floor(d%1e5/Math.pow(10,5-o/2)),c+" "+n(f,o/2)+" "+n(d,o/2)},osgbToLngLat:function(r,e){return i.inverse([r,e])},gridRefToOsgb:function(r){r=String(r).trim(),this._determineGridRefType(r);var e=r.match(/^(\d+),\s*(\d+)$/);if(e)return new OsGridRef(e[1],e[2]);if(!(e=r.match(/^[A-Z]{2}\s*[0-9]+\s*[0-9]+$/i)))throw new Error("Invalid grid reference: "+r);var o=r.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),i=r.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);o>7&&o--,i>7&&i--;var n=(o-2)%5*5+i%5,t=19-5*Math.floor(o/5)-Math.floor(i/5),a=r.slice(2).trim().split(/\s+/);if(1==a.length&&(a=[a[0].slice(0,a[0].length/2),a[0].slice(a[0].length/2)]),n>=15&&(n-=25),t>20&&(t-=25),n<-10||t<-5)throw new Error("Invalid grid reference: gridref="+r+", e100km="+n+", n100km="+t);if(2!=a.length)throw new Error("Invalid grid reference: "+r);if(a[0].length!=a[1].length)throw new Error("Invalid grid reference: "+r);return a[0]=(a[0]+"00000").slice(0,5),a[1]=(a[1]+"00000").slice(0,5),[parseInt(n+"00000")+parseInt(a[0]),parseInt(t+"00000")+parseInt(a[1])]},gridRefToLngLat:function(r){var e=this.gridRefToOsgb(r);return i.inverse(e)},_determineGridRefType:function(r){if(/^\w\s*\d{3,}\s*\d{3,}$/.test(r))throw new Error("Irish grid references currently unsupported: "+r)}}},4395:(r,e,o)=>{"use strict";o.r(e);var i=o(3934),n=o(942);function t(r,e,o,i,t){var s=n.Z.gridRefToLngLat(e);r.equal(s.length,2),a(r,s[0],o,t),a(r,s[1],i,t)}function a(r,e,o,i){var n=1e5,t=Math.floor(o*n)/n,a=Math.ceil(o*n)/n;t-=i,a+=i,r.ok(e>=t,e+" should be >= "+t),r.ok(e<=a,e+" should be <= "+a)}describe("conversion",(function(){it("latLngToGridRef - should return actual grid refs",(function(){i.hu.equal(n.Z.latLngToGridRef(52.657977,1.716038),"TG 51408 13177")})),it("osgbToLngLat - should work for valid OSBGs",(function(){var r=n.Z.osgbToLngLat(651409,313177);i.hu.equal(r.length,2),a(i.hu,r[0],1.7160384428258,0),a(i.hu,r[1],52.657976601295,0)})),it("gridRefToOsgb - should work for valid grid refs",(function(){i.hu.deepEqual(n.Z.gridRefToOsgb("TG 51408 13177"),[651408,313177])})),it("gridRefToOsgb - should work for channel islands",(function(){i.hu.deepEqual(n.Z.gridRefToOsgb("XD  83873  22339"),[383873,-77661])})),it("gridRefToLngLat - should work for valid grid refs",(function(){t(i.hu,"TG 51408 13177",1.716023690108,52.657977064472,0)})),it("gridRefToOsgb - should error for irish grids",(function(){i.hu.throws((function(){n.Z.gridRefToOsgb("S  6797  3789")}),/Irish/),i.hu.throws((function(){n.Z.gridRefToOsgb("W328850")}),/Irish/)})),it("gridRefToLngLat - should work for ireland and channel islands",(function(){t(i.hu,"MZ 82568 85820",-8.53034,54.99125,2e-5),t(i.hu,"MZ 86383 16308",-8.37269,54.37367,2e-5),t(i.hu,"RE 09504 80322",-9.48801,53.98501,2e-5),t(i.hu,"RO 61800 27500",-9.79229,51.68706,2e-5),t(i.hu,"WA 55943 05921",-13.43272,48.48317,1e-4),t(i.hu,"WA 57817 06737",-13.40949,48.49285,1e-4)}))}))}}]);
//# sourceMappingURL=395.eb137aaafd25fca49686.js.map